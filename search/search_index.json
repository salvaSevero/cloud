{"config":{"lang":["es"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"index.html","title":"Computaci\u00f3n en la Nube.","text":""},{"location":"index.html#computacion-en-la-nube","title":"Computaci\u00f3n en la Nube.","text":"<p>Entendemos por Computaci\u00f3n en la Nube hacer uso de infraestructura (almacenamiento, CPUS, RAM, ancho de banda) y servicios (bases de datos, firewalls, servicios DNS, ) de terceros para gestionar, bajo nuestra solicitud y pagando por uso.</p> <p>Ventajas</p> <p>\ud83d\udca5 Escalabilidad: Si necesito ampliar o reducir cualquier componente lo puedo hacer a trav\u00e9s de unos pocos clicks. Puedo incrementar/decrementar los recursos seg\u00fan mis necesidades: cantidad de servidores, balanceadores de carga, no estoy limitado por falta de espacio f\u00edsico o por falta de stock al no haber previsto alg\u00fan acontecimiento, etc.</p> <p>\ud83d\udca5 Centralizado: Se configura cualquier servicio, independientemente del tipo o de la localizaci\u00f3n desde la misma interfaz.</p> <p>\ud83d\udca5 Agilidad: Con una serie de clicks podemos levantar y configurar un servidor (No es necesario montarlo y cablearlo f\u00edsicamente).</p> <p>\ud83d\udca5 Control de Coste: Se paga por uso del servicio, por ejemplo pagaremos dependiendo del uso que hagamos del ancho de banda, o del tiempo que est\u00e9 la CPU encendida.</p> <p>\ud83d\udca5 Ahorro Inicial: Inversi\u00f3n inicial es mejor al no tener que comprar el hardware y parte del software. </p> <p>\ud83d\udca5 Menor Mantenimiento: No debes destinar recursos de tu empresa al mantenimiento de la infraestructura: Temperatura del CPD, redundancia del sistema el\u00e9ctrico, mantenimiento del cableado, electricidad, etc.</p> <p>Desventajas</p> <p>\ud83d\udca5 Si no controlas bien tus servidores o si no dise\u00f1as una buena arquitectura en la nube el coste se puede disparar.</p> <p>\ud83d\udca5 Necesitas de gente con conocimientos espec\u00edficos de la plataforma para un despliegue eficiente y adecuado.</p> <p>\ud83d\udca5 Los datos sensibles est\u00e1n almacenados en m\u00e1quinas que realmente no son propiedad de la empresa, incluso puede que se encuentren en otro pa\u00eds y no se rigan por las mismas normativas, por ejemplo no es la misma normativa de protecci\u00f3n de datos aqu\u00ed que en USA.</p>"},{"location":"index.html#openstack","title":"OpenStack.","text":"<p>OpenStack es un software de c\u00f3digo abierto que permite:</p> <ul> <li> <p>Crear y gestionar infraestructuras de nube privada y p\u00fablica.  </p> </li> <li> <p>Proporciona herramientas para la gesti\u00f3n de recursos como computaci\u00f3n, almacenamiento y redes, todo de manera escalable y flexible.</p> </li> </ul> <p>OpenStack es el software por debajo que permite:</p> <p>\ud83d\udca5 Generar las instancias de m\u00e1quinas virtuales usando diferentes recursos (CPU, RAM, disco, ...) de servidores f\u00edsicos.</p> <p>\ud83d\udca5 Manejar el almacenamiento asociado a cada m\u00e1quina virtual.</p> <p>\ud83d\udca5 Crear redes virtuales para asociar e interconectar las m\u00e1quinas entre ellas y a trav\u00e9s de Internet cuando sea necesario.</p> <p>Existen otros software como OpenStack: VMware vSphere, Microsoft Azure Stack, Apache CloudStack, Proxmox VE, ...</p>"},{"location":"index.html#modelos-y-servicios","title":"Modelos y Servicios.","text":"<ul> <li> <p>IaaS (Infraestructura como Servicio): Ofrece recursos f\u00edsisos (hardware) accesibles desde Internet como servidores (RAM, Disco, CPU) adem\u00e1s de la interconexi\u00f3n de red entre ellos.</p> </li> <li> <p>PaaS (Plataforma como Servicio):  Es un entorno completo para el desarrollo, la ejecuci\u00f3n y gesti\u00f3n de aplicaciones (Desarrollo Software). Es decir, ya no solo estamos contratando el hardware si no que tambi\u00e9n nos gestionan el tener instalado un sistema operativo, un entorno de programaci\u00f3n (IDE), las actualizaciones, los paquetes de programaci\u00f3n necesarias, el despliegue de la base de datos, etc.</p> </li> <li> <p>SaaS (Software como Servicio): Permite que el proveedor te despliegue y gestione (actualizaciones, correcci\u00f3n de errores, mantenimiento, ...) una aplicaci\u00f3n a la cual los clientes acceden normalmente mediante web o una API. Son las aplicaciones basadas en la nube</p> </li> </ul>"},{"location":"index.html#tipos-de-nubes","title":"Tipos de Nubes.","text":""},{"location":"index.html#nubes-publicas","title":"Nubes P\u00fablicas.","text":"<ul> <li> <p>Son las m\u00e1s extendidas.</p> </li> <li> <p>Los servidores son propiedad de terceros (Amazon -AWS, Microsoft - Azure, Google).</p> </li> <li> <p>Se accede a dichos recurso a trav\u00e9s de Internet (red p\u00fablica).</p> </li> </ul> <p>Ejemplos</p> <p></p> Amazon AWS <p> Microsoft Azure </p> <p> Google Cloud </p>"},{"location":"index.html#nubes-privadas","title":"Nubes Privadas.","text":"<ul> <li> <p>Todos los recursos est\u00e1n dedicados a un \u00fanica organizaci\u00f3n/empresa, estos recursos pueden estar alojados en un datacenter de la empresa o de un tercero.</p> </li> <li> <p>Se encuentran en una red privada.</p> </li> <li> <p>Suelen pertenecer a grandes organizaciones (gobiernos, bancos, etc) con necesidades muy espec\u00edficas sobre las cuales necesitan un control total.</p> </li> </ul> <p>Ventajas</p> <p>\ud83d\udca5 Mayor flexibilidad y control de los recursos. Al pertenecer a la empresa no se compartir\u00e1n recursos con terceros, es decir, si levantamos un servicio en un servidor, sabes que todo los recursos del servidor est\u00e1n destinados a uno o varios servicios de la misma empresa, del cual adem\u00e1s tenemos el control 100%.</p> <p>\ud83d\udca5 Mayor escalabilidad en cuanto a que no dependemos de las limitaciones de terceros. Esto siempre ser\u00e1 bueno si nuestra organizaci\u00f3n tiene el poder econ\u00f3mico muy grande.</p> <p>Desventajas</p> <p>\ud83d\udca5 Mayor inversi\u00f3n inicial.</p> <p>\ud83d\udca5 Necesitas mucha m\u00e1s personal cualificado para el despliegue y mantenimiento de hardware/software.</p> <p>Nubes Privadas Virtuales</p> <p>Se pueden desplegar nubes privadas virtuales en nubes p\u00fablicas.</p>"},{"location":"index.html#nubes-hibridas","title":"Nubes H\u00edbridas.","text":"<p>Son aquellas organizaciones cuya parte de su l\u00f3gica de negocio se encuentra en una nube p\u00fablica y parte en una nube privada.</p>"},{"location":"index.html#multicloud-networking","title":"MultiCloud Networking.","text":"<p>Se habla de MultiCloud cuando una misma organizaci\u00f3n tiene servicios alojadas en diferentes nubes p\u00fablicas, por ejemplo en AWS y Azure.</p> <p>Ventajas</p> <p>\ud83d\udca5 Puede aportar redundancia si hay alg\u00fan problema con una de las nubes p\u00fablicas.</p> <p>\ud83d\udca5 Puedes aprovecharte de las mejores innovaciones de una y otra.</p> <p>\ud83d\udca5 Puedes seleccionar los servicios m\u00e1s rentables econ\u00f3micamente de cada uno.</p> <p>Desventajas</p> <p>\ud83d\udca5 Necesitas gente con conocimientos de m\u00e1s de una nube p\u00fablica, lo que hace que la gesti\u00f3n pueda ser m\u00e1s complicada.</p>"},{"location":"10_WebEstaticaS3.html","title":"Web Est\u00e1tica","text":""},{"location":"10_WebEstaticaS3.html#web-estatica-con-s3","title":"Web est\u00e1tica con S3.","text":"<ul> <li>Vamos a generar una web est\u00e1tica que se almacenar\u00e1 en un S3.</li> </ul> <p>\u00bfQu\u00e9 es una web est\u00e1tica?</p> <p>Son p\u00e1ginas que son totalmente id\u00e9nticas para todos los usuarios. Solo se modifica si el desarrollador edita.</p>"},{"location":"10_WebEstaticaS3.html#crear-el-s3-bucket","title":"Crear el S3 (Bucket).","text":"<ul> <li>Elige un nombre \u00fanico en todo AWS para tu bucket.</li> <li>Permite el tr\u00e1fico p\u00fablico.</li> <li>Activa el versionado.</li> </ul>"},{"location":"10_WebEstaticaS3.html#establece-la-pagina-estatica","title":"Establece la p\u00e1gina est\u00e1tica.","text":"<ul> <li>Accede a tu bucket y dentro a la pesta\u00f1a propiedades.</li> <li> <p>Activa la opci\u00f3n de \"Static website hosting\" o \"Alojar un sitio web est\u00e1tico\".</p> <p>\ud83d\udca5 La p\u00e1gina inicial se llamar\u00e1 index.html.</p> </li> <li> <p>Accede a la web desde el enlace una vez activada la opci\u00f3n.</p> </li> </ul>"},{"location":"10_WebEstaticaS3.html#sube-los-ficheros-de-la-pagina-web-estatica-a-tu-s3","title":"Sube los ficheros de la p\u00e1gina web est\u00e1tica a tu S3.","text":"<p>Desde la p\u00e1gina principal de nuestro bucket en la pesta\u00f1a Objetos podemos arrastrar la web.</p> <p>La web est\u00e1tica la pod\u00e9is descargar del Aules.</p>"},{"location":"10_WebEstaticaS3.html#generamos-politicas-de-seguridad","title":"Generamos Pol\u00edticas de Seguridad.","text":"<ul> <li> <p>Dentro del Bucket accedemos a Permisos \u27a1\ufe0f Pol\u00edtica de Bucket.</p> </li> <li> <p>Vamos a usar el Generador de Pol\u00edticas para que nos ayude a confeccionar la medida de seguridad.</p> <p>\ud83d\udca5 Es importante que tengamos en cuenta el ARN de nuestro Bucket.</p> </li> </ul> <p>ARN.</p> <p></p> El ARN es una cadena de texto que identifica de forma \u00fanica dentro de AWS nuestro objeto, en este caso un S3. <p>Generador de Pol\u00edticas.</p> <p></p> Las pol\u00edticas creadas con el generador no se aplican autom\u00e1ticamente, son simplemente una muestra que podremos copiar. <p>Vamos a generar una pol\u00edtica que permita a los clientes ver nuestra p\u00e1gina pero que no puedan borrar/modificar/crear recursos en el S3.</p> <ul> <li> <p>Principal: Indica los usuarios que podr\u00e1n acceder a la p\u00e1gina. </p> <p>\ud83d\udca5 Con * permitimos cualquier usuario.</p> </li> <li> <p>Actions: Qu\u00e9 acciones permitimos hacer a los usuarios.</p> <p>\ud83d\udca5 Con GetObject s\u00f3lo les permitimos leer.</p> </li> <li> <p>ARN: Indica dentro del bucket a qu\u00e9 recursos se aplica esta regla.</p> <p>\ud83d\udca5 Con arn:aws:s3:::mi-cafe-web-cloud/* estamos haciendo referencia a todos los obetos del bucket.</p> </li> <li> <p>Conditions: Podemos agregar condiciones, por ejemplo limitar el acceso por IP.</p> </li> </ul> <p></p> <p>Recuerda pinchar en add statement para agregar la regla.</p> <ul> <li>Una vez generada la pol\u00edtica debemos copiarla y pegarla en la pesta\u00f1a de pol\u00edticas.</li> </ul> <p>Recuerda guardar los cambios para que se apliquen.</p>"},{"location":"10_WebEstaticaS3.html#activar-las-versiones-en-s3","title":"Activar las versiones en S3.","text":"<ul> <li>Al activar las versiones se crear\u00e1n diferentes objetos de otro al ser modificados. Esto nos permitir\u00e1 volver a restaurar una versi\u00f3n anterior de un archivo.</li> </ul> <p>Coste del Versionado.</p> <p></p> Activar el versionado es gratis, pero cada versi\u00f3n es un nuevo objeto que se crea dentro del S3 y por tanto el almacenamiento crece y con ello su coste."},{"location":"10_WebEstaticaS3.html#restauracion-automatica","title":"Restauraci\u00f3n Autom\u00e1tica.","text":""},{"location":"10_WebEstaticaS3.html#vamos-a-crear-una-version-de-un-fichero-y-luego-borrar-el-ultimo-y-ver-como-automaticamente-la-version-que-le-precede-toma-su-lugar","title":"Vamos a crear una versi\u00f3n de un fichero y luego borrar el \u00faltimo y ver como autom\u00e1ticamente la versi\u00f3n que le precede toma su lugar.","text":"<p>1\ufe0f\u20e3 Edita el fichero index.html con un bloc de notas. Por ejemplo Cambia el nombre de Javier.</p> <p>2\ufe0f\u20e3 Sube el fichero al bucket, sobrescribiendo el que hab\u00eda subido. Comprueba en la web que el cambio se ha realizado con \u00e9xito.</p> <p>3\ufe0f\u20e3 Comprueba dentro de aws, es decir haciendo click sobre el propio index.html que efectivamente tenemos dos objetos. </p> <p>4\ufe0f\u20e3 Elimina la \u00faltima versi\u00f3n del index.html subido. Comprueba en la web que el cambio se ha revertido autom\u00e1ticamente.</p>"},{"location":"10_WebEstaticaS3.html#gestion-de-versiones","title":"Gesti\u00f3n de Versiones.","text":"<p>En los siguientes apartados vamos a crear ciclos de vida para las versiones.</p>"},{"location":"10_WebEstaticaS3.html#1-crea-una-politica-para-transferir-las-versiones-mas-antiguas-30-dias-a-tipos-de-s3-mas-economicos","title":"1. Crea una pol\u00edtica para transferir las versiones m\u00e1s antiguas (30 d\u00edas) a tipos de S3 m\u00e1s econ\u00f3micos.","text":"<ul> <li>Debe aplicarse a todos los elementos del S3.</li> <li>Debe transferir las versiones desactualizadas, no a la que est\u00e1 en producci\u00f3n.</li> <li>Pasados 30 d\u00edas deben transferirse a un S3 Est\u00e1ndar de acceso poco frecuente (IA).</li> </ul> <p>Si dejamos las versiones vac\u00edas afectar\u00e1 a todas las versiones del bucket.</p>"},{"location":"10_WebEstaticaS3.html#2-crea-una-politica-para-eliminar-las-versiones-pasadas-200-dias-excepto-la-ultima-version","title":"2. Crea una pol\u00edtica para eliminar las versiones pasadas 200 d\u00edas, excepto la \u00faltima versi\u00f3n.","text":"<ul> <li>Debe aplicarse a todos los elementos del S3.</li> <li>Deben eliminarse pasados 200 d\u00edas, a excepci\u00f3n de la versi\u00f3n m\u00e1s reciente que debe mantenerse.</li> </ul> <p>Si en el apartado de versiones ponemos un 1, quiere decir que esta regla no afectar\u00e1 a la \u00faltima versi\u00f3n creada (la m\u00e1s reciente).</p>"},{"location":"10_WebEstaticaS3.html#replicas-entre-buckets","title":"R\u00e9plicas entre Buckets.","text":"<p>Creaci\u00f3n de Bucket de Backup.</p> <p>Para este apartado tendr\u00e9is que volver a crear otro bucket auxiliar que debe cumplir lo siguiente:</p> <ul> <li>Debe encontrarse en la regi\u00f3n de Oreg\u00f3n - us-west-2.</li> <li>Debe tener las versiones habilitadas.</li> <li>Debe poder accederse de forma p\u00fablica.</li> <li>Nuestro Rol se llama LabRole</li> </ul> <ul> <li>Vamos a crear una r\u00e9plica autom\u00e1tica en otro S3 de otra regi\u00f3n de AWS.</li> </ul> <ul> <li>Debe afectar a todos los objetos del bucket.</li> <li>Se debe seleccionar un bucket auxiliar creado previamente.</li> </ul> <p>Al finalizar indicarle que NO replique los ficheros existentes.</p>"},{"location":"10_WebEstaticaS3.html#comprobacion-del-funcionamiento","title":"Comprobaci\u00f3n del funcionamiento.","text":"<ul> <li>Vuelve a modificar el fichero index.html y subirlo al bucket oficial.</li> <li>Pasado unos minutos en el apartado de objetos del bucket auxiliar deber\u00eda aparecer dicho fichero replicado.</li> </ul>"},{"location":"10_WebEstaticaS3.html#video-de-ejemplo","title":"V\u00eddeo de Ejemplo.","text":""},{"location":"11_aws_cli.html","title":"Configuraci\u00f3n","text":""},{"location":"11_aws_cli.html#aws-cli","title":"AWS CLI.","text":""},{"location":"11_aws_cli.html#ques-es-aws-cli","title":"\u00bfQu\u00e9s es AWS CLI?","text":"<p>AWS CLI (Command Line Interface) es una herramienta que se ejecuta desde la l\u00ednea de comandos que permite gestionar todos los servicios de Amazon Web Services, es decir, crear y gestionar EC2, S3, EFS, EBS, a trav\u00e9s de comandos.</p>"},{"location":"11_aws_cli.html#instalacion","title":"Instalaci\u00f3n.","text":"<p>Descarga AWS CLI</p>"},{"location":"11_aws_cli.html#configuracion","title":"Configuraci\u00f3n.","text":"<ul> <li>Abrimos un terminal y ejecutamos aws configure</li> </ul> <p>El comando nos preguntar\u00e1 por informaci\u00f3n, la cual podemos dejar en blanco para el caso de AWS Academy.</p> <pre><code>AWS Access Key ID [None]: \nAWS Secret Access Key [None]: \nDefault region name [None]: \nDefault output format [None]: \n</code></pre> <ul> <li>Esto crea el fichero .aws/credentials, que editaremos. </li> </ul> <p>Credentials</p> <ul> <li>En Linux/macOs el archivo estar\u00e1 en la ruta: ~/.aws/credentials.</li> <li>En Windows estar\u00e1 en la ruta: C:\\Users\\usuario\\.aws\\credentials.</li> </ul> <ul> <li>Dentro de \u27a1\ufe0f AWS Details \u27a1\ufe0f Cloud Access \u27a1\ufe0f AWS CLI podemos recabar la informaci\u00f3n necesaria:</li> </ul> <p>Solo es necesario copiar y pegar todo el texto en el fichero credentials.</p> <ul> <li> <p>Una vez editado el fichero con la nueva informaci\u00f3n ejecutamos de nuevo aws configure</p> <p>\ud83d\udca5 Regi\u00f3n: us-east-1</p> <p>\ud83d\udca5 Formato: json</p> </li> </ul>"},{"location":"11_aws_cli.html#creacion-de-ec2","title":"Creaci\u00f3n de EC2.","text":"<pre><code>aws ec2 run-instances \\\n    --image-id ami-0360c520857e3138f \\\n    --count 1 \\\n    --instance-type t2.micro \\\n    --key-name vockey \\\n    --security-groups PermiteSSH \\\n    --user-data \"sudo apt update &amp;&amp; sudo apt install -y nginx\" \\\n    --tag-specifications 'ResourceType=instance,Tags=[{Key=Name,Value=mi-servidor-web}]'\n</code></pre> <ul> <li>image-id: El ID de la imagen AMI.</li> </ul> <ul> <li> <p>count: N\u00famero de instancias a crear.</p> </li> <li> <p>instance-type: Tipo de m\u00e1quina (CPU / RAM)</p> </li> </ul> <ul> <li>key-name: Claves de acceso ssh (vockey).</li> </ul> <ul> <li>security-groups: Filtros de seguridad que aplicas.</li> </ul> <ul> <li> <p>user-data: Comandos a ejecutar al crear la m\u00e1quina.</p> </li> <li> <p>tag-specifications: Se usa para informaci\u00f3n de etiquetas como el nombre de la EC2 (mi-servidor-web).</p> </li> </ul> <p>AYUDA.</p> <p>aws ec2 run-instances help</p>"},{"location":"11_aws_cli.html#crear-una-regla-de-seguridad","title":"Crear una regla de seguridad.","text":"<p>Vamos a crear una regla que permita el tr\u00e1fico de entrada para SSH(22), HTTP(80), HTTPS(443).</p>"},{"location":"11_aws_cli.html#primero-creamos-el-grupo-de-seguridad-que-incluira-todas-las-reglas","title":"Primero creamos el grupo de seguridad que incluir\u00e1 todas las reglas.","text":"<pre><code>aws ec2 create-security-group \\\n    --group-name permite-web \\\n    --description \"Permite acceso ssh y web\"\n</code></pre>"},{"location":"11_aws_cli.html#anadimos-regla-de-entrada-que-permita-el-ssh","title":"A\u00f1adimos regla de entrada  que permita el SSH.","text":"<pre><code>aws ec2 authorize-security-group-ingress \\\n    --group-name permite-web \\\n    --protocol tcp \\\n    --port 22 \\\n    --cidr 0.0.0.0/0\n</code></pre>"},{"location":"11_aws_cli.html#anadimos-regla-de-entrada-que-permita-el-http","title":"A\u00f1adimos regla de entrada que permita el HTTP.","text":"<pre><code>aws ec2 authorize-security-group-ingress \\\n    --group-name permite-web \\\n    --protocol tcp \\\n    --port 80 \\\n    --cidr 0.0.0.0/0\n</code></pre>"},{"location":"11_aws_cli.html#anadimos-regla-de-entrada-que-permita-el-https","title":"A\u00f1adimos regla de entrada  que permita el HTTPS.","text":"<pre><code>aws ec2 authorize-security-group-ingress \\\n    --group-name permite-web \\\n    --protocol tcp \\\n    --port 443 \\\n    --cidr 0.0.0.0/0\n</code></pre> <ul> <li> <p>aws ec2 authorize-security-group-ingress: Crea una regla de seguridad de entrada  sobre el tr\u00e1fico entrante (ingress) a tu m\u00e1quina.</p> </li> <li> <p>group-name: Nombre del grupo de seguridad al que se le a\u00f1ade la regla.</p> </li> <li> <p>cidr: Direcciones IP o Red a la que afecta la regla.</p> </li> </ul> <p>El CIDR 0.0.0.0/0 indica cualquier direcci\u00f3n IP.</p>"},{"location":"11_aws_cli.html#crear-un-s3","title":"Crear un S3.","text":""},{"location":"11_aws_cli.html#crea-un-cubo","title":"Crea un cubo.","text":"<pre><code>aws s3 mb s3://mibucket-unico-total\n</code></pre> <p>Recuerda que los nombres de cubos deben ser \u00fanicos en todo AWS.</p>"},{"location":"11_aws_cli.html#lista-los-cubos-existentes","title":"Lista los cubos existentes.","text":"<pre><code>aws s3 ls\n</code></pre> \u00bfC\u00f3mo listar\u00edas el contenido de un cubo? <pre><code>aws s3 ls s3://mibucket-unico-total\n</code></pre>"},{"location":"11_aws_cli.html#subir-un-fichero","title":"Subir un fichero.","text":"<pre><code>aws s3 cp labS3.csv s3://mibucket-unico-total\n</code></pre> \u00bfC\u00f3mo descargar\u00edas un fichero desde el S3? <pre><code>aws s3 cp s3://mibucket-unico-total/labS3.csv copiaLabS3.csv\n</code></pre>"},{"location":"11_aws_cli.html#subir-una-carpeta","title":"Subir una carpeta.","text":"<pre><code>aws s3 sync nombreCarpeta s3://mibucket-unico-total\n</code></pre>"},{"location":"11_aws_cli.html#borrar-un-bucket-s3","title":"Borrar un Bucket S3.","text":"<pre><code>aws s3 rb --force s3://mibucket-unico-total\n</code></pre> \u00bfC\u00f3mo eliminar\u00edas un fichero de un cubo? <pre><code>aws s3 rm s3://mibucket-unico-total/Fichero\n</code></pre>"},{"location":"11_aws_cli.html#no-puedes-usar-aws-s3-para","title":"No puedes usar aws s3 para:","text":"<ul> <li> <p>Desactivar el bloqueo de acceso p\u00fablico.</p> </li> <li> <p>Aplicar una pol\u00edtica de bucket (bucket policy).</p> </li> <li> <p>Activar el modo de alojamiento web est\u00e1tico.</p> </li> <li> <p>Avtivar el  versionado.</p> </li> </ul> <p>Para todo eso necesitas aws s3api.</p>"},{"location":"11_aws_cli.html#uso-de-s3api","title":"Uso de s3api.","text":""},{"location":"11_aws_cli.html#hacer-busquedas-de-archivos-filtradas","title":"Hacer b\u00fasquedas de archivos filtradas.","text":"<pre><code>aws s3api list-objects --bucket mibucket-unico-total --prefix \"nombre\"\n</code></pre>"},{"location":"11_aws_cli.html#activar-versionado","title":"Activar versionado.","text":"<pre><code>aws s3api put-bucket-versioning --bucket mibucket-unico-total --versioning-configuration Status=Enabled\n</code></pre>"},{"location":"11_aws_cli.html#activar-modo-web-estatica","title":"Activar modo web est\u00e1tica","text":"<pre><code>aws s3 website s3://mibucket-unico-total/ \\\n  --index-document index.html \\\n  --error-document error.html\n</code></pre> <p>El error-document no es obligatorio.</p>"},{"location":"11_aws_cli.html#habilitar-el-acceso-publico","title":"Habilitar el acceso p\u00fablico.","text":"<pre><code>aws s3api put-public-access-block \\\n  --bucket mibucket-unico-total \\\n  --public-access-block-configuration \\\n  \"BlockPublicAcls=false,IgnorePublicAcls=false,BlockPublicPolicy=false,RestrictPublicBuckets=false\"\n</code></pre>"},{"location":"11_aws_cli.html#crear-politicas","title":"Crear pol\u00edticas.","text":"<pre><code>aws s3api put-bucket-policy --bucket mibucket-unico-total   --policy '{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [{\n      \"Sid\": \"PublicReadGetObject\",\n      \"Effect\": \"Allow\",\n      \"Principal\": \"*\",\n      \"Action\": \"s3:GetObject\",\n      \"Resource\": \"arn:aws:s3:::mibucket-unico-total/*\"\n    }]\n  }'\n</code></pre> En Windows es diferente, pincha para ver el ejemplo. <p>En el caso de Windows es necesario escapar las comillas dobles y poner doble. </p><pre><code>aws s3api put-bucket-policy --bucket mibucket-unico-total   --policy '{\n    \\\"\"Version\\\"\": \\\"\"2012-10-17\\\"\",\n    \\\"\"Statement\\\"\": [{\n    \\\"\"Sid\\\"\": \\\"\"PublicReadGetObject\\\"\",\n    \\\"\"Effect\\\"\": \\\"\"Allow\\\"\",\n    \\\"\"Principal\\\"\": \\\"\"*\\\"\",\n    \\\"\"Action\\\"\": \\\"\"s3:GetObject\\\"\",\n    \\\"\"Resource\\\"\": \\\"\"arn:aws:s3:::mibucket-unico-total/*\\\"\"\n    }]\n}'\n</code></pre>"},{"location":"2_Nubes.html","title":"Cloud Computing","text":""},{"location":"2_Nubes.html#computacion-en-la-nube","title":"Computaci\u00f3n en la Nube.","text":"<p>Entendemos por Computaci\u00f3n en la Nube hacer uso de infraestructura (almacenamiento, CPUS, RAM, ancho de banda) y servicios (bases de datos, firewalls, servicios DNS, ) de terceros para gestionar, bajo nuestra solicitud y pagando por uso.</p> <p>Ventajas</p> <p>\ud83d\udca5 Escalabilidad: Si necesito ampliar o reducir cualquier componente lo puedo hacer a trav\u00e9s de unos pocos clicks. Puedo incrementar/decrementar los recursos seg\u00fan mis necesidades: cantidad de servidores, balanceadores de carga, no estoy limitado por falta de espacio f\u00edsico o por falta de stock al no haber previsto alg\u00fan acontecimiento, etc.</p> <p>\ud83d\udca5 Centralizado: Se configura cualquier servicio, independientemente del tipo o de la localizaci\u00f3n desde la misma interfaz.</p> <p>\ud83d\udca5 Agilidad: Con una serie de clicks podemos levantar y configurar un servidor (No es necesario montarlo y cablearlo f\u00edsicamente).</p> <p>\ud83d\udca5 Control de Coste: Se paga por uso del servicio, por ejemplo pagaremos dependiendo del uso que hagamos del ancho de banda, o del tiempo que est\u00e9 la CPU encendida.</p> <p>\ud83d\udca5 Ahorro Inicial: Inversi\u00f3n inicial es mejor al no tener que comprar el hardware y parte del software. </p> <p>\ud83d\udca5 Menor Mantenimiento: No debes destinar recursos de tu empresa al mantenimiento de la infraestructura: Temperatura del CPD, redundancia del sistema el\u00e9ctrico, mantenimiento del cableado, electricidad, etc.</p> <p>Desventajas</p> <p>\ud83d\udca5 Si no controlas bien tus servidores o si no dise\u00f1as una buena arquitectura en la nube el coste se puede disparar.</p> <p>\ud83d\udca5 Necesitas de gente con conocimientos espec\u00edficos de la plataforma para un despliegue eficiente y adecuado.</p> <p>\ud83d\udca5 Los datos sensibles est\u00e1n almacenados en m\u00e1quinas que realmente no son propiedad de la empresa, incluso puede que se encuentren en otro pa\u00eds y no se rigan por las mismas normativas, por ejemplo no es la misma normativa de protecci\u00f3n de datos aqu\u00ed que en USA.</p>"},{"location":"2_Nubes.html#openstack","title":"OpenStack.","text":"<p>OpenStack es un software de c\u00f3digo abierto que permite:</p> <ul> <li> <p>Crear y gestionar infraestructuras de nube privada y p\u00fablica.  </p> </li> <li> <p>Proporciona herramientas para la gesti\u00f3n de recursos como computaci\u00f3n, almacenamiento y redes, todo de manera escalable y flexible.</p> </li> </ul> <p>OpenStack es el software por debajo que permite:</p> <p>\ud83d\udca5 Generar las instancias de m\u00e1quinas virtuales usando diferentes recursos (CPU, RAM, disco, ...) de servidores f\u00edsicos.</p> <p>\ud83d\udca5 Manejar el almacenamiento asociado a cada m\u00e1quina virtual.</p> <p>\ud83d\udca5 Crear redes virtuales para asociar e interconectar las m\u00e1quinas entre ellas y a trav\u00e9s de Internet cuando sea necesario.</p> <p>Existen otros software como OpenStack: VMware vSphere, Microsoft Azure Stack, Apache CloudStack, Proxmox VE, ...</p>"},{"location":"2_Nubes.html#modelos-y-servicios","title":"Modelos y Servicios.","text":"<ul> <li> <p>IaaS (Infraestructura como Servicio): Ofrece recursos f\u00edsisos (hardware) accesibles desde Internet como servidores (RAM, Disco, CPU) adem\u00e1s de la interconexi\u00f3n de red entre ellos.</p> </li> <li> <p>PaaS (Plataforma como Servicio):  Es un entorno completo para el desarrollo, la ejecuci\u00f3n y gesti\u00f3n de aplicaciones (Desarrollo Software). Es decir, ya no solo estamos contratando el hardware si no que tambi\u00e9n nos gestionan el tener instalado un sistema operativo, un entorno de programaci\u00f3n (IDE), las actualizaciones, los paquetes de programaci\u00f3n necesarias, el despliegue de la base de datos, etc.</p> </li> <li> <p>SaaS (Software como Servicio): Permite que el proveedor te despliegue y gestione (actualizaciones, correcci\u00f3n de errores, mantenimiento, ...) una aplicaci\u00f3n a la cual los clientes acceden normalmente mediante web o una API. Son las aplicaciones basadas en la nube</p> </li> </ul>"},{"location":"2_Nubes.html#tipos-de-nubes","title":"Tipos de Nubes.","text":""},{"location":"2_Nubes.html#nubes-publicas","title":"Nubes P\u00fablicas.","text":"<ul> <li> <p>Son las m\u00e1s extendidas.</p> </li> <li> <p>Los servidores son propiedad de terceros (Amazon -AWS, Microsoft - Azure, Google).</p> </li> <li> <p>Se accede a dichos recurso a trav\u00e9s de Internet (red p\u00fablica).</p> </li> </ul> <p>Ejemplos</p> <p></p> Amazon AWS <p> Microsoft Azure </p> <p> Google Cloud </p>"},{"location":"2_Nubes.html#nubes-privadas","title":"Nubes Privadas.","text":"<ul> <li> <p>Todos los recursos est\u00e1n dedicados a un \u00fanica organizaci\u00f3n/empresa, estos recursos pueden estar alojados en un datacenter de la empresa o de un tercero.</p> </li> <li> <p>Se encuentran en una red privada.</p> </li> <li> <p>Suelen pertenecer a grandes organizaciones (gobiernos, bancos, etc) con necesidades muy espec\u00edficas sobre las cuales necesitan un control total.</p> </li> </ul> <p>Ventajas</p> <p>\ud83d\udca5 Mayor flexibilidad y control de los recursos. Al pertenecer a la empresa no se compartir\u00e1n recursos con terceros, es decir, si levantamos un servicio en un servidor, sabes que todo los recursos del servidor est\u00e1n destinados a uno o varios servicios de la misma empresa, del cual adem\u00e1s tenemos el control 100%.</p> <p>\ud83d\udca5 Mayor escalabilidad en cuanto a que no dependemos de las limitaciones de terceros. Esto siempre ser\u00e1 bueno si nuestra organizaci\u00f3n tiene el poder econ\u00f3mico muy grande.</p> <p>Desventajas</p> <p>\ud83d\udca5 Mayor inversi\u00f3n inicial.</p> <p>\ud83d\udca5 Necesitas mucha m\u00e1s personal cualificado para el despliegue y mantenimiento de hardware/software.</p> <p>Nubes Privadas Virtuales</p> <p>Se pueden desplegar nubes privadas virtuales en nubes p\u00fablicas.</p>"},{"location":"2_Nubes.html#nubes-hibridas","title":"Nubes H\u00edbridas.","text":"<p>Son aquellas organizaciones cuya parte de su l\u00f3gica de negocio se encuentra en una nube p\u00fablica y parte en una nube privada.</p>"},{"location":"2_Nubes.html#multicloud-networking","title":"MultiCloud Networking.","text":"<p>Se habla de MultiCloud cuando una misma organizaci\u00f3n tiene servicios alojadas en diferentes nubes p\u00fablicas, por ejemplo en AWS y Azure.</p> <p>Ventajas</p> <p>\ud83d\udca5 Puede aportar redundancia si hay alg\u00fan problema con una de las nubes p\u00fablicas.</p> <p>\ud83d\udca5 Puedes aprovecharte de las mejores innovaciones de una y otra.</p> <p>\ud83d\udca5 Puedes seleccionar los servicios m\u00e1s rentables econ\u00f3micamente de cada uno.</p> <p>Desventajas</p> <p>\ud83d\udca5 Necesitas gente con conocimientos de m\u00e1s de una nube p\u00fablica, lo que hace que la gesti\u00f3n pueda ser m\u00e1s complicada.</p>"},{"location":"3_Caracteristcas.html","title":"Caracter\u00edsticas","text":""},{"location":"3_Caracteristcas.html#caracteristicas","title":"Caracter\u00edsticas.","text":""},{"location":"3_Caracteristcas.html#regiones-y-zonas-de-disponibilidad","title":"Regiones y Zonas de disponibilidad","text":"<p>Las plataformas Cloud Computing (AWS, Azure, Google Cloud), suelen estar presentes en varias zonas y regiones, es decir, sus servidores se encuentran en diferentes paises y ciudades, incluso en varios CPD diferentes en la misma ciudad.</p> <p>Esto les permite:</p> <ul> <li> <p>Una alta disponibilidad y tolerancia a fallos, pues podemos tener nuestros servicios replicados en diferentes zonas dentro de una regi\u00f3n en incluso en regiones diferentes.</p> </li> <li> <p>Desplegar tu aplicaci\u00f3n/servicio en diferentes partes del mundo, mejorando la latencia para los usuarios de esa regi\u00f3n.</p> </li> </ul> <p>Regi\u00f3n y Zona</p> <p>\ud83d\udca5 Una regi\u00f3n se compone de varias zonas de disponibilidad donde podemos desplegar nuestros servicios.</p> <p></p> Regiones de AWS <p>CPD</p> <p>Un Centro de Procesamiento de Datos (CPD) es una instalaci\u00f3n f\u00edsica donde se alojan servidores, sistemas de almacenamiento, bases de datos, etc. </p> <p></p>"},{"location":"3_Caracteristcas.html#modelo-de-responsabilidad-compartida","title":"Modelo de Responsabilidad Compartida.","text":"<p>Ante un fallo en nuestro servidor, ya sea por un ataque cibern\u00e9tico o por un error en el hardware, existe un Modelo de Responsabilidad Compartida que indica qui\u00e9n era el responsable de que esa parte no fallara.</p> <p>Esta responsabilidad variar\u00e1 dependiendo del tipo de servicio que estemos contratando (IaaS, PaaS, SaaS).</p>"},{"location":"3_Caracteristcas.html#responsabilidad-del-proovedor-aws-azure-google-cloud-huawei-cloud","title":"Responsabilidad del proovedor (AWS, Azure, Google Cloud, Huawei Cloud, ...).","text":"<ul> <li> <p>Infraestructura f\u00edsica: Servidores, electricidad, seguridad f\u00edsica de los racks, cableado e interconexiones, equipos de red, ... </p> </li> <li> <p>Software: En el caso del software que sea suministrado por ellos, deben comprobar que no tiene un software malicioso incorporado durante la instalaci\u00f3n, que es compatible con nuestra m\u00e1quina virtual por ejemplo.</p> </li> </ul>"},{"location":"3_Caracteristcas.html#responsabilidades-del-cliente-nosotros","title":"Responsabilidades del cliente (nosotros).","text":"<ul> <li> <p>El mantenimiento y gesti\u00f3n del sistema operativo, as\u00ed como de cualquier software instalado por nosotros.</p> </li> <li> <p>El acceso a la plataforma, es decir, usuarios que tienen acceso a la gesti\u00f3n de nuestras m\u00e1quinas en la plataforma (Ej: AWS).</p> </li> <li> <p>Configuraci\u00f3n adecuada de los grupo de seguridad.</p> </li> <li> <p>Configuraci\u00f3n l\u00f3gica de la red.</p> </li> <li> <p>Correcto almacenamiento de los datos de nuestros clientes, por ejemplo si los queremos cifrados.</p> </li> </ul> Responsabilidad Compartida AWS."},{"location":"3_Caracteristcas.html#costes-en-la-nube","title":"Costes en la Nube.","text":"<p>Uno de los apartados m\u00e1s importantes como arquitectos/dise\u00f1adores de entornos en un sistema en la nube es el control/c\u00e1lculo de costes.</p> <p>Para ello debemos tener dos cosas en cuenta:</p> <p>1. Cu\u00e1nto nos vamos a ahorrar de no montar el sistema f\u00edsicamente: servidores, cableado, electricidad, refrigeraci\u00f3n, personal de mantenimiento, etc.</p> Costes de levantar servidores en local. <p>2. Calcular aproximadamente cu\u00e1nto va a costar mensualmente el tener funcionando el servicio en la plataforma Cloud que hayamos elegido.</p>"},{"location":"3_Caracteristcas.html#calculadora-de-costes","title":"Calculadora de costes.","text":"<p>La mayor\u00eda de plataformas de Cloud Computing nos permiten hacer uso de una Calculadora de Costes para ver en el tiempo cuanto nos costar\u00eda levantar los servicios que tenemos en mente.</p> <p>Habitualmente hay 4 aspectos que son los que generan el precio final de un servidor/servicio:</p> <ul> <li> <p>Procesamiento: Se refiere a la cantidad y calidad de las CPUs y Memoria RAM seleccionadas. Se suele cobrar \u00fanicamente cuando la m\u00e1quina est\u00e1 encendida (se cobra por uso).</p> </li> <li> <p>Almacenamiento: Dependiendo de la calidad y capacidad del almacenamiento seleccionado. Este cobro es constante pues aunque desconectemos la m\u00e1quina el almacenamiento sigue siendo usado.</p> </li> <li> <p>Red: Suele acarrear costes por el tr\u00e1fico de salida que genere nuestro servicio. </p> </li> <li> <p>Licencias: En caso de que estemos haciendo uso de alg\u00fan software con licencias de pago.</p> </li> </ul> <p>Calculadoras</p> <p>\ud83c\udf29\ufe0f Calculadora AWS</p> <p>\ud83c\udf29\ufe0f Calculadora AZURE</p> <p>\ud83c\udf29\ufe0f Calculadora GOOGLE CLOUD</p> <p>Escalar los Servicios</p> <p>Nuestros requisitos como empresa pueden variar a lo largo de las semanas o incluso en el mismo d\u00eda.</p> <p>Por ello se pueden automatizar procesos que nos permitan ampliar los recursos cuando la demanda sea mayor y reducirlos cuando sea menor, ahorrando as\u00ed costes, al no pagar de m\u00e1s por un sistema sobredimensionado.</p>"},{"location":"3_Caracteristcas.html#reserva-de-recursos","title":"Reserva de recursos.","text":"<p>En AWS es posible reservar recursos de cara al futuro, de esta forma el coste ser\u00e1 menor, aunque necesitaremos una buena previsi\u00f3n de qu\u00e9 vamos a necesitar.</p> <p>Tambi\u00e9n podemos seleccionar pago anticipado de estos recursos reservados a cambio de un descuento en los precios.</p> <p>Tipos de reservas:</p> <ul> <li> <p>AURI (All Upfront Reserved Instance): Reserva de recursos + Pago Anticipado 100%.</p> </li> <li> <p>PURI (Partial Upfront Reserved Instance): Reserva de recursos + Pago Parcial por adelantado.</p> </li> <li> <p>NURI (No Upfront Payments Reserved Instance): Reserva de recursos pero pago cuando esta reserva se hace efectiva.</p> </li> <li> <p>Bajo Demanda: Sin reserva y por tanto sin pago anticipado.</p> </li> </ul> <p>Servicios Almacenamiento</p> <p>En algunos servicios, especialmente los relacionados con almacenamiento el coste del GB es menor cuanta m\u00e1s capacidad contrates.</p>"},{"location":"3_Caracteristcas.html#instancias-spot","title":"Instancias Spot.","text":"<p>Las instancias spot hacen referencia a aquellas instancias que se ejecutan con el exceso de capacidad de AWS, suelen tener un descuento muy grande pero no tenemos garantizado ning\u00fan recurso.</p> <p>El cliente selecciona unas necesidades para su instancia, unas horas de funcionamiento y si en esas horas hay un exceso de capacidad considerable por parte de amazon entonces levanta la instancia durante el tiempo indicado a un precio muy reducido.</p> <p>Ejemplo</p> <ul> <li> <p>Una empresa quiere analizar millones de datos de sus clientes y proveedores para entrenar una IA que le ayude en la toma de decisiones.</p> </li> <li> <p>Esta tarea es computacionalmente muy costosa y necesita mucho tiempo, no obstante se puede pausar e ir ejecutando paulatinamente.</p> </li> <li> <p>La empresa contrata una instancia spot, es decir, cuando haya un exceso de recursos en AWS (no tienen suficientes clientes y los servidores de AWS est\u00e1n parados y perdiendo dinero), se levanta autom\u00e1ticamente la instancia y comienza a ejecutar/entrenar a esa IA.</p> </li> </ul>"},{"location":"3_Caracteristcas.html#practica-calculadora-aws","title":"Pr\u00e1ctica Calculadora AWS.","text":"<p>CalculadoraAWS</p>"},{"location":"4_EC2.html","title":"EC2","text":""},{"location":"4_EC2.html#ec2-amazon-elastic-compute-cloud","title":"EC2 (Amazon Elastic Compute Cloud).","text":""},{"location":"4_EC2.html#caracteristicas","title":"Caracter\u00edsticas.","text":"<ul> <li> <p>Genera m\u00e1quinas virtuales en la nube.</p> </li> <li> <p>Se suele utilizar para desplegar servidores:</p> <p>\ud83d\udca5 Servidores Web.</p> <p>\ud83d\udca5 Servidores de Correo.</p> <p>\ud83d\udca5 Servidores de Archivos.</p> </li> <li> <p>Su coste depende de los recursos usados por dicho servidor.</p> <p>\ud83d\udca5 Memoria RAM.</p> <p>\ud83d\udca5 N\u00facleos de CPU.</p> <p>\ud83d\udca5 Tipos de Discos.</p> <p>\ud83d\udca5 IP P\u00fablica est\u00e1tica.</p> </li> <li> <p>Es un servicio escalable, pudiendo a\u00f1adir o quitar memoria o CPU dependiendo de las necesidades en cada momento.</p> </li> </ul>"},{"location":"4_EC2.html#elementos-que-conforman-una-instancia-ec2","title":"Elementos que conforman una instancia EC2.","text":""},{"location":"4_EC2.html#ami-amazon-machine-image","title":"AMI (Amazon Machine Image).","text":"<p>Son im\u00e1genes donde vienen ya preconfigurados el sistema operativo y las aplicaciones.</p> <p>Tipos de AMI:</p> <ul> <li> <p>Quick Start AMI: Son AMIs predise\u00f1adas por AWS, inclueyen Linux, Windows o Mac. </p> </li> <li> <p>AMI personalizadas: Son AMI que hemos generado a partir de un sistema, ya sea en una m\u00e1quina local o virtual mediante VmWare, VirtualBox, o incluso una propia EC2.</p> </li> <li> <p>AWS Marketplace: Incluye miles de AMIs de terceros que se pueden comprar y tienen ya su software preinstalado y licencia incluida. Suelen ser de pago.</p> </li> <li> <p>AMI de la comunidad: Incluye todas las AMI que cualquier persona quiera hacer p\u00fablica, con el software y configuraci\u00f3n pertinentes que exponga dicha persona. AWS no se responsabiliza del contenido de dichas AMI y por tanto es recomendable evitarlas en entornos corporativos o de producci\u00f3n.</p> </li> </ul> <p>AVISO</p> <p></p> Cuando creamos una AMI, \u00e9sta solo existe en la regi\u00f3n donde la hemos creado."},{"location":"4_EC2.html#instancias","title":"Instancias","text":"<p>Las instancias son plantillas de hardware de las que se compondr\u00e1 nuestro servidor (CPU, Memoria y Familia).</p> <p>Familia</p> <p>La Familia indica esa arquitectura de m\u00e1quina virtual a qu\u00e9 tipo de servidor va asociado, es decir, si va a ser un servidor centrado en computaci\u00f3n, memoria, almacenamiento, procesamiento gr\u00e1fico o de \u00e1mbito general.</p> <p>Tipos de Instancias</p> <p>Dentro de cada familia existen multitud de categor\u00edas que nos permiten un r\u00e1pido escalado de nuestro servidor.</p>"},{"location":"4_EC2.html#par-de-claves","title":"Par de Claves.","text":"<p>Es necesario al crear una EC2 generar un par de claves (p\u00fablica/privada) que usaremos para posteriormente acceder y gestionar nuestra m\u00e1quina.</p> <p>Podemos elegir una por defecto que nos genera AWS (vockey) o generar una nosotros.</p> <p>PELIGRO</p> <p>Si generamos nuestras propias claves, debemos descargarlas y guardarlas en un lugar seguro. </p> <p>Esta es la \u00fanica oportunidad de guardar el archivo de clave privada. Si perdemos las claves, tendremos que destruir la instancia y volver a crearla.</p>"},{"location":"4_EC2.html#configuracion-de-red","title":"Configuraci\u00f3n de Red.","text":"Por el momento no vamos a entrar en detalle en la configuraci\u00f3n de red ya que la veremos en otro apartado."},{"location":"4_EC2.html#almacenamiento","title":"Almacenamiento.","text":""},{"location":"4_EC2.html#opciones-de-almacenamiento","title":"Opciones de almacenamiento.","text":"<ul> <li> <p>N\u00famero de discos que queremos que tenga nuestro servidor.</p> </li> <li> <p>Capacidad.</p> </li> <li> <p>Velocidad del disco.</p> </li> <li> <p>Si queremos los datos del disco encriptado.</p> </li> <li> <p>Si queremos conservar los datos del disco a\u00fan cuando se elimine la EC2 (m\u00e1quina virtual).</p> </li> </ul>"},{"location":"4_EC2.html#gestion-de-la-ec2","title":"Gesti\u00f3n de la EC2.","text":"<p>Para la gesti\u00f3n de la EC2, deberemos ir al apartado de Instancias dentro del bloque EC2.</p> <p>Usuario</p> <p></p> Es importante saber cual es el usuario por defecto, esta informaci\u00f3n podemos verla al escoger la AMI durante la instalaci\u00f3n de la EC2."},{"location":"4_EC2.html#acceso-por-terminal","title":"Acceso por terminal.","text":"<p>\u00bfQu\u00e9 sucede si no tenemos acceso a un navegador y queremos acceder desde la terminal de nuestro ordenador?</p> <p>En ese caso deberemos acceder usando el par de claves de SSH de forma manual.</p>"},{"location":"4_EC2.html#descargar-la-clave-privada","title":"Descargar la clave privada.","text":"<p>Danger</p> <p></p> Debemos almacenar la clave privada en alg\u00fan sitio seguro, con ella pueden acceder a nuestro servidor."},{"location":"4_EC2.html#credenciales-de-la-maquina-ec2","title":"Credenciales de la m\u00e1quina EC2.","text":"<p>Vamos al apartado de conexi\u00f3n de la EC2.</p> <p>Datos importantes para la conexi\u00f3n siguiendo el ejemplo:</p> <ul> <li> <p>Nombre DNS: ec2-174-129-55-94.compute-1.amazonaws.com</p> </li> <li> <p>Usuario: ubuntu</p> </li> <li> <p>Clave Privada: vockey.pem</p> </li> </ul> <p>Clave Privada</p> <p>Normalmente cuando la descargamos tiene el nombre de \"labsuser.pem\"</p> <pre><code>ssh -i \"labsuser.pem\" ubuntu@ec2-54-221-43-103.compute-1.amazonaws.com\n</code></pre>"},{"location":"4_EC2.html#acceso-por-rdp-remote-desktop-protocol","title":"Acceso por RDP (Remote Desktop Protocol).","text":"<p>RDP</p> <p></p> RDP es un protocolo de acceso con interfaz gr\u00e1fico para el acceso remoto al escritorio."},{"location":"4_EC2.html#descargar-la-clave-privada-pem","title":"Descargar la clave privada (PEM).","text":"<p>Danger</p> <p></p> Debemos almacenar la clave privada en alg\u00fan sitio seguro, con ella pueden acceder a nuestro servidor."},{"location":"4_EC2.html#ver-credenciales-de-la-maquina-ec2","title":"Ver credenciales de la m\u00e1quina EC2.","text":"<ul> <li>Deberemos subir la clave privada (.pem) que nos hemos descargado en el punto anterior.</li> </ul> <ul> <li>Una vez subida la clave privada nos descifrar\u00e1 la clave de usuario de la m\u00e1quina.</li> </ul>"},{"location":"4_EC2.html#acceso-a-la-maquina-ec2","title":"Acceso a la m\u00e1quina EC2.","text":"<ul> <li>Accedemos al apartado de conexi\u00f3n de la m\u00e1quina EC2.</li> </ul> <ul> <li>Debemos descargarnos el .rdp ya configurado simplemente para el acceso desde una aplicaci\u00f3n que soporte RDP.</li> </ul> <p>Acceso</p> <p>Una vez descargado el fichero lo ejecutamos e introducimos la contrase\u00f1a mostrada en el apartado anterior.</p>"},{"location":"4_EC2.html#video-explicativo","title":"V\u00eddeo Explicativo.","text":"<p>Creaci\u00f3n y Gesti\u00f3n EC2</p>"},{"location":"5_WP.html","title":"WordPress","text":""},{"location":"5_WP.html#wordpress-ec2","title":"WordPress EC2.","text":""},{"location":"5_WP.html#practica","title":"Pr\u00e1ctica.","text":"<p>Hay que crear una m\u00e1quina EC2 con un servicio WordPress que contenga:</p> <ul> <li> <p>El wordpress a instalar debe ser la \u00faltima versi\u00f3n: Wordpress</p> </li> <li> <p>Una AMI del marketplace community de Bitnami. </p> </li> </ul> <p>Usuario/Contrase\u00f1a</p> <p></p> Recuerda visitar la p\u00e1gina del proveedor para averiguar como acceder a la m\u00e1quina (usuario/contrase\u00f1a). <p>Verified Provider</p> <p></p> Si elegimos un \"Verified Provider\" deberemos estar suscritos a este proveedor y no se puede hacer con la cuenta de estudiante que tenemos. <ul> <li>Una IP fija (Elastic IP). </li> </ul> <p>No IP Din\u00e1mica</p> <p>Es importante que no asigne una IP din\u00e1mica durante la creaci\u00f3n de la EC2.</p> <p></p> <ul> <li> <p>Pol\u00edtica Seguridad que permita el acceso web:</p> <p>\ud83d\udca5 Desde cualquier origen (0.0.0.0/0).</p> <p>\ud83d\udca5 Con destino nuestro servidor web (EC2).</p> <p>\ud83d\udca5 A trav\u00e9s de los protocolos web  HTTP (80) y HTTPS (443).</p> </li> </ul>"},{"location":"5_WP.html#comprobacion","title":"Comprobaci\u00f3n.","text":"<ul> <li>Accede a la IP/DNS p\u00fablico desde tu navegador.</li> </ul> <ul> <li>Para acceder a la gesti\u00f3n de tu web deber\u00e1s acceder a /wp-admin.</li> </ul>"},{"location":"6_S3.html","title":"S3","text":""},{"location":"6_S3.html#amazon-simple-storage-service-s3-o-buckets","title":"Amazon Simple Storage Service (S3) o Buckets.","text":"<p>Servico de almacenamiento de objetos que pueden ser accedidos a trav\u00e9s de una URL.</p> <p>EFS vs S3</p> <p></p> A diferencia de EFS un almacenamiento de S3 puede ser accedido desde cualquier parte, mientras que los EFS solo pueden ser accedidos por ECS de la misma regi\u00f3n. <p>Programaci\u00f3n</p> <p></p> Al ser accesibles desde una URL tambi\u00e9n pueden ser accedidos desde el c\u00f3digo de nuestros programas."},{"location":"6_S3.html#caracteristicas","title":"Caracter\u00edsticas.","text":"<ul> <li>El nombre debe ser \u00fanico en todo AWS.</li> <li>Puede almacenar cantidades de datos ilimitadas.</li> <li>Un mismo objeto no puede pesar m\u00e1s de 5TB.</li> <li> <p>Todos los objetos guardados cuentan con una clave, un ID de versi\u00f3n, un valor, metadatos y subrecursos.</p> <p>\ud83d\udca5 La clave es el nombre con el cual puedes descargar el fichero o con el que lo guardas en el bucket.</p> <p>\ud83d\udca5 El ID de versi\u00f3n se usa porque podemos almacenar diferentes versiones, por ejemplo de un documento.</p> <p>\ud83d\udca5 El valor es el contenido.</p> <p>\ud83d\udca5 Los metadatos pueden ser creados por los usuarios o por el propio sistema de AWS para la gesti\u00f3n del objeto.</p> </li> <li> <p>Por defecto los S3 se replican autom\u00e1ticamente en diferentes zonas de la misma regi\u00f3n.</p> </li> <li> <p>Se cobra por el tr\u00e1fico de descarga desde el cubo y por el almacenamiento en si.</p> <p>\ud83d\udca5Precios S3 en Espa\u00f1a.</p> </li> <li> <p>Son m\u00e1s lentos que el almacenamiento en un EBS.</p> </li> </ul> <p>Almacenamiento por objetos.</p> <p></p> Un objeto no puede ser modificado desde el propio S3. Si quiero modificar un documento debo descargarlo, modificarlo y volver a subirlo a S3."},{"location":"6_S3.html#casos-de-uso","title":"Casos de uso.","text":"<ul> <li> <p>Aplicaciones: Para el almacenamiento de ciertos recursos de aplicaciones como: archivos multimedia de los usuarios o registros del servicio. </p> </li> <li> <p>Webs Est\u00e1ticas: Pueden alojar webs est\u00e1ticas.</p> </li> <li> <p>Copias de seguridad: Permite un almacenaje barato y accesible para almacenar y restaurar copias de seguridad.</p> </li> </ul>"},{"location":"6_S3.html#tipos-de-s3","title":"Tipos de S3:","text":"<ul> <li> <p>S3 Est\u00e1ndar: Ofrece mayor rendimiento, se usa para acceso habitual de datos. Usado por aplicaciones web, servicios de contenido (v\u00eddeos), videojuegos, etc.</p> </li> <li> <p>S3 Est\u00e1ndar - Acceso poco frecuente: Sigue siendo un acceso r\u00e1pido, pero a los que se accede con menos frecuencia, pero que requieren acceso r\u00e1pido cuando es necesario, por ejemplo una copia de seguridad reciente.</p> </li> <li> <p>S3 One Zone \u2013 Acceso poco frecuente: Acceso tambi\u00e9n de alto rendimiento pero sin r\u00e9plicas, usado en copias de seguridad secundarias.</p> </li> <li> <p>S3 Intelligent-Tiering: Autom\u00e1ticamente mueve los objetos a diferentes tipos de Buckets (S3) dependiendo de los accesos o necesidades. Por ejemplo si un archivo no se accede en 30 d\u00edas se pasa a un S3 de Acceso poco frecuente y viceversa si comienza a usarse de forma habitual. </p> </li> <li> <p>S3 Glacier: Es un almacenamiento lento de bajo coste. Se usa para los datos que es m\u00e1s raros acceder. </p> </li> </ul>"},{"location":"6_S3.html#politica-de-ciclo-de-vida","title":"Pol\u00edtica de Ciclo de Vida.","text":"<ul> <li>Dicta la vida \u00fatil de un archivo dependiendo del uso que se haga de \u00e9l, por ejemplo pasando a uso poco frecuente y seguidamente a Glacier y finalmente para su eliminaci\u00f3n,  reduciendo costes de forma autom\u00e1tica.</li> </ul>"},{"location":"7_EBS.html","title":"EBS","text":""},{"location":"7_EBS.html#ebs-amazon-elastic-block-store","title":"EBS (Amazon Elastic Block Store).","text":"<p>Almacenamiento a nivel de Bloque asociada a una instancia EC2.</p>"},{"location":"7_EBS.html#ventajas","title":"Ventajas:","text":"<ul> <li>Replicaci\u00f3n autom\u00e1tica dentro de la misma zona de disponibilidad.</li> <li>El almacenamiento es persistente, incluso cuando la EC2 es eliminada.</li> <li>Se pueden cifrar los datos de forma sencilla.</li> <li>F\u00e1cilmente escalables, es decir, se puede aumentar su tama\u00f1o (no reducir).</li> </ul>"},{"location":"7_EBS.html#tipos-de-volumenes-discos","title":"Tipos de vol\u00famenes (discos).","text":"<p>IOPS</p> <p></p> Es el n\u00famero de la cantidad de entrada/salida por segundo. Es un indicador del rendimiento del disco. <ul> <li> <p>Unidades de estado solido (SSD):</p> <p>\ud83d\udca5 Gen\u00e9ricos: Los tipos existentes son gp3 (1.000 MiB/s) y gp2(128-250 MiB/s) ambas con un m\u00e1ximo de 16.000 IOPS.</p> <p>\ud83d\udca5 Alto rendimiento IOPS: Los tipos existentes con io2 Block Express (4.000 MiB/s con un m\u00e1ximo 246.000 IOPS) e io2 (1.000 MiB/s con 64.000 IOPS).</p> </li> <li> <p>Unidades de disco duro (HDD):</p> <p>\ud83d\udca5 Optimizadas para grandes cargas de trabajo de streaming. </p> <p>\ud83d\udca5 Los tipos existentes con st1 (Throughput Optimized HDD, con 500 MiB/s y 500 IOPS) y sc1 (Cold HDD, con 250 MiB/s y 250 IOPS).</p> <p>\ud83d\udca5 Existen los EBS Cold HDD que hace referencia a discos muy baratos aunque lentos que en principio no van a ser accedidos de forma habitual, por ejemplo para almacenar copias de seguridad m\u00e1s antiguas.</p> </li> </ul> <p>Un volumen EBS s\u00f3lo se puede asociar a una instancia EC2 de su misma zona de disponibilidad.</p>"},{"location":"7_EBS.html#practica","title":"Pr\u00e1ctica.","text":""},{"location":"7_EBS.html#crea-un-volumen-ebs","title":"Crea un volumen EBS:","text":"<ul> <li>Tipo gp3 (3000 IOPS) de 100GB. </li> <li>Crea una etiqueta (tag) con el par \"Nombre --&gt; EBS_Practica\" para identificar el volumen.</li> <li>La zona de disponibilidad debe ser la misma que nuestra m\u00e1quina.</li> </ul>"},{"location":"7_EBS.html#asocia-el-volumen-a-una-instancia-linux","title":"Asocia el volumen a una instancia Linux.","text":"<p>Para ello debemos seleccionar el volumen \u27a1\ufe0f Actions \u27a1\ufe0f Attach Volume.</p> <ul> <li>Seleccionamos la instancia a la que tenemos que asociarla.</li> <li>Seleccionamos la conexi\u00f3n de almacenamiento que tendr\u00e1 dentro  del servidor (/dev/...).</li> </ul> <p>Se puede comprobar que efectivamente lo tenemos asociado yendo a la pesta\u00f1a de volumenes (storage) de la instancia.</p>"},{"location":"7_EBS.html#gestionar-disco-desde-la-ec2","title":"Gestionar disco desde la EC2.","text":"<p>Accedemos a la EC2 por SSH y lanzamos el comando lsblk donde podremos ver el volumen asociado.</p> <ul> <li>Damos formato al volumen EBS.</li> <li>Montamos el disco en una carpeta.</li> <li>Creamos una carpeta dentro del volumen.</li> </ul> <pre><code>sudo mkfs -t ext4 /dev/nvme1n1\nsudo mount /dev/nvme1n1 /mnt\nsudo mkdir /mnt/prueba_ebs\n</code></pre>"},{"location":"7_EBS.html#incrementar-volumen","title":"Incrementar volumen.","text":"<p>Menus EBS \u27a1\ufe0f Seleccionamos el volumen \u27a1\ufe0f Actions \u27a1\ufe0f Modify Volume \u27a1\ufe0f Aumentamos la capacidad (120GB).</p> <p>Con el comando \"lsblk\" podemos comprobar que efectivamente se ha producido el cambio.</p> <p>No obstante tenemos que redimensionar la partici\u00f3n para que ocupe todo el disco.</p> <p>Con el comando \"df -h\" podemos comprobar que realmente no estamos haciendo uso los 120GB, si no de los 100GB originales.</p> <p>Para redimensionarlo y ocupe todo el espacio real hay que indicarle que ocupe el nuevo espacio.</p> <pre><code>sudo resize2fs /dev/nvme1n1\n</code></pre> <p>Posteriormente podremos comprobar con \"df -h\" que efectivamente ya se est\u00e1 haciendo uso de todo el disco.</p>"},{"location":"7_EBS.html#instantaneas-snapshots","title":"Instant\u00e1neas (Snapshots).","text":"<p>Para hacer r\u00e9plicas de los vol\u00famenes EBS se usan las instan\u00e1neas.</p> <ul> <li> <p>Para crear una instant\u00e1nea vamos a EBS \u27a1\ufe0f Snapshots \u27a1\ufe0f Create Snapshot.</p> </li> <li> <p>Una vez la instant\u00e1nea est\u00e1 generada (completada), podemos crear un volumen en base a ella.</p> </li> </ul> <p>Recuerda crear el volumen en la misma zona que tus EC2.</p> <p>Desgraciadamente no tenemos permisos como estudiantes a generar vol\u00famenes a partir de instant\u00e1neas.</p> <p>LifeCycle Manager</p> <p></p> Las instant\u00e1neas se pueden programar de forma autom\u00e1tica cada ciertas horas/d\u00edas mediante el LifeCycle Manager, no obstante no est\u00e1 disponible en AWS Academy."},{"location":"8_Almacenamiento.html","title":"Almacenamiento","text":""},{"location":"8_Almacenamiento.html#almacenamiento-en-ebs","title":"Almacenamiento en EBS.","text":""},{"location":"8_Almacenamiento.html#almacenamiento-en-la-nube-vs-almacenamiento-tradicional","title":"Almacenamiento en la nube vs Almacenamiento Tradicional.","text":"<ul> <li>Confiable al tener todos los sistemas redundados y al ser muy sencillo hacer copias en diferentes lugares.</li> <li>Escalable al poder aumentar la capacidad con un par de clicks, sin necesidad de ir a\u00f1adiendo discos.</li> </ul> \u00bfQu\u00e9 proceso deber\u00edamos seguir si en nuestra empresa querr\u00edamos incrementar nuestra capacidad de disco duro? <ul> <li>A\u00f1adir en el servidor nuevos discos duros.</li> <li>Configurarlos dentro del RAID. </li> <li>Problemas \u27a1\ufe0f No detectar el disco, el problema de insertar un disco en caliente o que no tengamos m\u00e1s conexiones libres para a\u00f1adir nuevos discos, etc.</li> </ul>"},{"location":"8_Almacenamiento.html#almacenamiento-por-bloque-vs-almacenamiento-por-objeto","title":"Almacenamiento por bloque vs Almacenamiento por objeto.","text":""},{"location":"8_Almacenamiento.html#almacenamiento-por-bloque","title":"Almacenamiento por bloque.","text":"<ul> <li>Los datos se almacenan por bloques, habitualmente de 4096 bytes. </li> <li>Si se ha de modificar una parte de los datos solo se cambian los bloques donde se encuentran dichos datos. No es necesario reescribir el resto de bloques.</li> <li>Es el tipo de almacenamiento usado en discos SSD y HDD.</li> </ul>"},{"location":"8_Almacenamiento.html#almacenamiento-por-objeto","title":"Almacenamiento por objeto.","text":"<ul> <li>Es un almacenamiento secuencial, aunque se modifique una peque\u00f1a parte del objeto \u00e9ste se reescribe por completo.</li> </ul> \u00bfCu\u00e1les dir\u00edas que son las ventajas de cada tipo de almacenamiento? <p>Almacenamiento por bloque: Es m\u00e1s r\u00e1pido.</p> <p>Almacenamiento por objetos: Es m\u00e1s sencillo de implementar y m\u00e1s barato.</p>"},{"location":"9_EFS.html","title":"EFS","text":""},{"location":"9_EFS.html#efs-amazon-elastic-file-system","title":"EFS (Amazon Elastic File System).","text":""},{"location":"9_EFS.html#caracteristicas","title":"Caracter\u00edsticas.","text":"<ul> <li> <p>Ofrece almacenaje para m\u00faltiples EC2, a diferencia de los EBS que es para una \u00fanica EC2.</p> </li> <li> <p>Funciona como si fuera un NAS (Network Area Storage).</p> </li> <li> <p>Utiliza  el protocolo de sistema de archivos NFS.</p> </li> </ul> <p>NFS</p> <p>Al usar NFS deberemos tener instalado nuestros paquetes de NFS en los servidores.</p> <p>\ud83d\udca5 Ubuntu/Debian: nfs-common</p> <p>\ud83d\udca5 Otras distribuciones: nfs-utils</p> <ul> <li> <p>El espacio escala autom\u00e1ticamente (aumentar y reducir) a medida que necesitemos m\u00e1s o menos espacio en disco.</p> </li> <li> <p>El rendimiento (IOPS) tambi\u00e9n escala autom\u00e1ticamente dependiendo del trabajo y del tama\u00f1o.</p> </li> <li> <p>Pueden interconectarse con m\u00e1quinas de cualquier zona de disponibilidad dentro de la misma regi\u00f3n.</p> </li> <li> <p>No puede ser accedido desde fuera de la regi\u00f3n de AWS.</p> </li> <li> <p>El coste var\u00eda respecto a la frecuencia con la que se producen las transferencias.</p> </li> </ul> https://aws.amazon.com/es/efs/pricing/ <p>EBS vs EFS</p> <ul> <li> <p>EBS es un disco virtual que se a\u00f1ade a una \u00fanica EC2.</p> </li> <li> <p>EFS es una carpeta compartida mediante el protocolo NFS entre muchas EC2.</p> </li> </ul>"},{"location":"9_EFS.html#practica","title":"Pr\u00e1ctica.","text":"<p>La pr\u00e1ctica consistir\u00e1 en crear un EFS que sea solo accesible desde una de nuestras m\u00e1quinas EC2.</p>"},{"location":"9_EFS.html#recabar-la-informacion-de-nuestra-instancia","title":"Recabar la informaci\u00f3n de nuestra instancia:","text":"<p>Debemos buscar el grupo de seguridad y la zona de disponibilidad de nuestra m\u00e1quina EC2.</p>"},{"location":"9_EFS.html#reglas-de-seguridad","title":"Reglas de Seguridad.","text":"<p>Vamos a crear una regla de entrada para el EFS que permita:</p> <ul> <li> <p>Tr\u00e1fico NFS.</p> </li> <li> <p>Originado desde la m\u00e1quina EC2 que indiquemos.</p> <p>\ud83d\udca5 Para ello aplicamos como origen (source) el grupo de seguridad aplicado en la EC2 que queremos que pueda acceder.</p> </li> </ul>"},{"location":"9_EFS.html#crear-efs","title":"Crear EFS.","text":"<p>Creamos el EFS y pinchamos en personalizar (Customize) para:</p> <ul> <li> <p>Deshabilitar Automatic Backups.</p> </li> <li> <p>Deshabilitar Transition into Infrequent Access (IA) del LifeCycle Management.</p> </li> <li> <p>En cuanto a las redes \u00fanicamente debemos dejar la zona de disponibilidad de nuestra instancia junto con su grupo de seguridad.</p> </li> </ul>"},{"location":"9_EFS.html#montar-el-efs-en-nuestra-ec2","title":"Montar el EFS en nuestra EC2.","text":"<p>Dentro del men\u00fa EFS, seleccionamos el nuestro y vamos al apartado de \"Attach/Asociar\".</p> <p>El argumento final \"efs\" indica el directorio donde se montar\u00e1 el sistema de archivos.</p> <p>Los siguientes comandos ya se ejecutan en la instancia EC2 donde queremos montar el EFS.</p> <p>Para montar el EFS necesitaremos los paquetes necesarios para usar el protocolo NFS.</p> <pre><code>sudo apt install nfs-common\n</code></pre> <p>Tambi\u00e9n vamos a instalar unos paquetes de Amazon para la gesti\u00f3n de EFS dentro de Ubuntu:</p> <pre><code>sudo apt-get update\nsudo apt-get -y install git binutils rustc cargo pkg-config libssl-dev gettext\ngit clone https://github.com/aws/efs-utils\ncd efs-utils\n./build-deb.sh\nsudo apt-get -y install ./build/amazon-efs-utils*deb\n</code></pre> <p>Dentro de la carpeta que queremos que se enlace con el sistema EFS deberemos ejecutar:</p> <pre><code>sudo mount -t nfs4 -o nfsvers=4.1,rsize=1048576,wsize=1048576,hard,timeo=600,retrans=2,noresvport XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX:/ .\n</code></pre> <p>IMPORTANTE</p> <p></p> Sustituye las XXXXXXXXXXXXXXX por el DNS de tu EFS. <p>Podemos comprobar que est\u00e1 todo montado con \"df -h\"</p>"},{"location":"9_EFS.html#automatizar-el-montaje-en-el-arranque","title":"Automatizar el montaje en el arranque.","text":"<p>Al iniciar la m\u00e1quina el sistema de archivos EFS no est\u00e1 montado.</p> <p>Para que podamos montarlo de forma autom\u00e1tica deberemos editar el fichero /etc/fstab y a\u00f1adir:</p> <pre><code>[fs-XXXXXXXX].efs.[REGION].amazonaws.com:/ /path/to/mount/dir nfs4 defaults,_netdev 0 0\n</code></pre>"},{"location":"9_EFS.html#comprobar-el-rendimiento","title":"Comprobar el Rendimiento.","text":"<p>Para comprobar el rendimiento usaremos la herramienta fio.</p> <pre><code>sudo apt install fio\nsudo fio --name=fio-efs --filesize=10G --filename=test.img --bs=1M --nrfiles=1 --direct=1 --sync=0 --rw=write --iodepth=200 --ioengine=libaio\n</code></pre> <p>Tras estos comandos se habr\u00e1 creado un fichero de 10G en el EFS.</p> <p>Si vais al men\u00fa de EFS podr\u00e9is comprobar que ten\u00e9is los 10G creados.</p>"}]}